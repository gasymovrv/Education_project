# Hibernate
## Важные нюансы
+ Проблемы с Lazy=true
    + Свойство lazy=true – автоматическое запонение вложенных сущностей хибернейтом, если к ним обращаются в рамках одной сессии
    + Если печатать в консоль вложенные сущности из базы, то Lazy работает только внутри бина. 
    + Если вызываем через getBean из ApplicationContext, то на этот момент сессия уже закрыта и поэтому не получается подтянуть вложенные сущности
+ Удаление сирот и каскады
    + Если установлено более лояльное свойство чем Cascade=all-delete-orphan, например Cascade=all или Cascade=save-update, то сирот  придется удалять вручную - удаляя зависимые объекты.
+ Транзакции + ошибки transaction-synchronized и org.hibernate.LazyInitializationException
    + Метод помеченный @Transactional будет транзакцией. Если вызывать внутри него методы с такой же аннотацией, то внутренняя транзакция станет частью внешней (если свойство propagation не изменено). 
    + Получение сессии методом getCurrentSession() необходимо осуществлять только в методе аннотированном @Transactional, иначе ошибка ... transaction-synchronized
    + Если внутри транзакции была получена сессия методом getCurrentSession(), то закроется она с завершением последнего метода с @Transactional. Таким образом, если в каком-то методе без @Transactional инициировать заполнение вложенных сущностей (только если lazy=true), то возникает org.hibernate.LazyInitializationException, т.к. сессия уже закрылась.
